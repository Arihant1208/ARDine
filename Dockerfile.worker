# 3D Model Generation Worker (BullMQ consumer)
FROM node:22-alpine

WORKDIR /app

# Install dependencies
COPY package.json package-lock.json ./
RUN npm ci --ignore-scripts

# Copy source code
COPY tsconfig.json ./
COPY backend/ backend/
COPY database/ database/
COPY src/shared/types.ts src/shared/types.ts

# Worker has no exposed ports â€” it only consumes from the Redis queue

CMD ["npx", "tsx", "backend/worker.ts"]
